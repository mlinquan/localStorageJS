function localStorageJS(a,options,localStorageJSTag){function get(){var i,source,n,name,url,parent,version,islocal,info,xhr,xtype,jj;if(j>lsI){if(i=lsI++,n=1,name=a[i].name?a[i].name:"temp"+i,url=a[i].url?a[i].url:"string"==typeof a[i]?a[i]:null,parent=a[i].parent?a[i].parent:null,version=a[i].version?a[i].version:"",callback=a[i].callback?a[i].callback:null,expires=a[i].expires?a[i].expires:config.expires,removeSelf=a[i].removeSelf?a[i].removeSelf:null,type=a[i].type?a[i].type:file_type(url),tmp_a=document.createElement("a"),url=abspath2relpath(url),tmp_a.href=url,islocal=tmp_a.hostname==location.hostname,tmp_a=null,lsList[name]={url:url,type:type,parent:parent,version:version,callback:callback,el:null,islocal:islocal,removeSelf:removeSelf,lsStatus:null},localstorageable&&localStorage.getItem(name)?(source=localStorage.getItem(name),0==source.indexOf("/*var lsJS")&&(info=source.match(/var lsJS = (.*)\;/i),info[0]&&(eval(info[0]),lsJS.error?(n=2,"not-allow-cors"==lsJS.error?n=3:second-lsJS.expires>config.error_expires&&(n=4)):("never"!=lsJS.expires&&second-lsJS.expires>config.expires||version&&(!lsJS.version||lsJS.version<version))&&(n=0)))):n=0,n>0&&4>n)1==n?(lsList[name].el=create_element(type,url,source),lsList[name].lsStatus="loaded"):3==n?(lsList[name].el=create_element(type,url,!1),lsList[name].lsStatus="panding"):lsList[name].lsStatus="error",release(name);else{xtype=null;try{xhr=new XMLHttpRequest}catch(e){}if(islocal?!xhr&&window.ActiveXObject&&(xhr=new ActiveXObject("Microsoft.XMLHTTP")):xhr&&"withCredentials"in xhr||("undefined"!=typeof XDomainRequest?(xhr=new XDomainRequest,xtype="XDR"):xhr=null),xhr)if(jj=function(){xhr.responseText?(source="css"==type?css_repath(url,xhr.responseText):xhr.responseText,source="/*var lsJS = {expires:"+second+",version:"+version+"};*/\n"+source,localstorageable&&localStorage.setItem(name,source),lsList[name].el=create_element(type,url,source),lsList[name].lsStatus="loaded"):(localstorageable&&localStorage.setItem(name,"/*var lsJS = {error: "+xhr.status+", expires:"+second+"};*/\n"),lsList[name].lsStatus="error")},xtype)xhr.onerror=function(){localstorageable&&localStorage.setItem(name,"/*var lsJS = {error: 'not-allow-cors', expires:"+second+"};*/\n"),lsList[name].el=create_element(type,url,!1),lsList[name].lsStatus="panding",release(name)},xhr.onload=function(){jj(),release(name)},xhr.open("get",url),xhr.send(null);else try{xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||304==xhr.status?(jj(),release(name)):islocal||0!=xhr.status?(localstorageable&&localStorage.setItem(name,"/*var lsJS = {error: "+xhr.status+", expires:"+second+"};*/\n"),lsList[name].lsStatus="error",release(name)):(localstorageable&&localStorage.setItem(name,"/*var lsJS = {error: 'not-allow-cors', expires:"+second+"};*/\n"),lsList[name].el=create_element(type,url,!1),lsList[name].lsStatus="panding",release(name)))},xhr.open("get",url,!0),xhr.send(null)}catch(e){lsList[name].lsStatus="error",release(name)}else lsList[name].el=create_element(type,url,!1),lsList[name].lsStatus="panding",release(name)}get()}}function file_type(a){return/(\.js$|\.js\?.+$|\.js#.+$)/i.test(a)?"js":/(\.css$|\.css\?.+$|\.css#.+$)/i.test(a)?"css":void 0}function abspath2relpath(a,b){var f,g,h,c=location.port&&!/(80|443|0)/.test(location.port)?":"+location.port:"",d=location.protocol+"//"+location.hostname+c,e=d+location.pathname;return/(^http:[\/]{2}|https:[\/]{2})/i.test(a)?a:(b&&/(https:[\/]{2}|http:[\/]{2}|[\/]{1})/i.test(b)?/^\//gi.test(b)?b=d+b:/(https:[\/]{2}|http:[\/]{2})/i.test(b)?3==b.split("/").length&&(b+="/"):b=e+b:b=e,/\/$/i.test(b)||(b=b.substr(0,b.lastIndexOf("/")+1)),/^\//i.test(a)&&(b=b.match(/(http:[\/]{2}|https:[\/]{2})([^\/]+)/i)[0]),f=document.createElement("a"),f.href=b+a,tmpport=f.port&&!/(80|443|0)/.test(f.port)?":"+f.port:"",g=/^\//i.test(f.pathname)?f.pathname:"/"+f.pathname,h=f.protocol+"//"+f.hostname+tmpport+g+f.search+f.hash,f=null,h)}function create_element(a,b,c){var d;return"js"==a?(d=document.createElement("script"),d.type="text/javascript",d.title=b):"css"==a&&(d=document.createElement("style"),d.type="text/css"),c?+[1]?d.textContent=c:"css"==a?d.styleSheet.cssText=c:"js"==a&&(d.text=c):"js"==a?d.src=b:"css"==a&&(d=document.createElement("link"),d.rel="stylesheet",d.href=b),d}function css_repath(a,b){var g,h,i,c=/\@import([\s+])?url\(.+?\)/gi,d=/url\([\s\'\"]*(?!https:[\/]{2}|http:[\/]{2}|\/)([^)\'\"]+)/gi,e=/url\([\s\'\"]*/gi;if(b.match(c),g=b.match(d))for(h=0;h<g.length;h++)i=g[h].replace(e,""),b=b.replace(i,abspath2relpath(i,a));return b}function release(a){"loaded"==lsList[a].lsStatus||"panding"==lsList[a].lsStatus?!lsList[a].parent||lsList[a].parent&&"allready"!=lsList[a].parent&&"ok"==lsList[lsList[a].parent].lsStatus?"loaded"==lsList[a].lsStatus?(lsList[a].lsStatus="ok",head.appendChild(lsList[a].el),lsList[a].callback&&"function"==typeof lsList[a].callback&&lsList[a].callback(),count--,release_panding(a)):(lsList[a].el.onload=lsList[a].el.onreadystatechange=function(){lsList[a].el.readyState&&"loaded"!=lsList[a].el.readyState&&"complete"!=lsList[a].el.readyState||(lsList[a].lsStatus="ok",lsList[a].callback&&"function"==typeof lsList[a].callback&&lsList[a].callback(),count--,release_panding(a))},lsList[a].el.onerror=function(){localstorageable&&localStorage.setItem(lsList[a].url,"/*var lsJS = {error: 404, expires:"+second+"};*/\n"),lsList[a].lsStatus="error",head.removeChild(lsList[a].el),count--,release_panding(a)},head.appendChild(lsList[a].el)):(lsPanding[lsList[a].parent]||(lsPanding[lsList[a].parent]={}),lsPanding[lsList[a].parent][a]=1,release_panding(a)):(count--,release_panding(a))}function release_panding(a){if(lsPanding[a])for(x in lsPanding[a])release(x);if(count==lsAllready){for(q in lsList)"loaded"==lsList[q].lsStatus&&(head.appendChild(lsList[q].el),lsList[q].lsStatus="ok",lsList[q].callback&&"function"==typeof lsList[q].callback&&lsList[q].callback(),count--),"js"==lsList[q].type&&(lsList[q].removeSelf||config.removeAll)&&head.removeChild(lsList[q].el);head.removeChild(localStorageJSTag)}}var opt,i,parent,j=count=a.length,lsI=0,lsList={},lsPanding={},lsAllready=0,second=(new Date).getTime()/1e3,head=document.head||document.getElementsByTagName("head")[0],localstorageable="undefined"!=typeof window.localStorage,config={corsProxy:null,expires:10080,error_expires:10080};if(options)for(opt in options)config[opt]=options[opt];for(i=0;j>i;i++)parent=a[i].parent?a[i].parent:null,"allready"==parent&&lsAllready++;get(),localstorageable&&!localStorage.getItem("localStorageJS")&&localStorage.setItem("localStorageJS","var localStorageJS_version = "+runZeroRequest.version+";\n"+localStorageJS.toString())}